# ============================================================
# Condensate Core — Environment Configuration
# Copy this file to .env and fill in your values.
# ============================================================

# ------------------------------------------------------------
# Database (PostgreSQL)
# ------------------------------------------------------------
DATABASE_URL=postgresql://condensate:password@db:5432/condensate_db

# ------------------------------------------------------------
# Vector Store (Qdrant)
# QDRANT_URL takes precedence over QDRANT_HOST + QDRANT_PORT.
# Use QDRANT_URL for managed/cloud Qdrant; use HOST+PORT for
# docker-compose setups where the service name is the hostname.
# ------------------------------------------------------------
QDRANT_HOST=qdrant
QDRANT_PORT=6333
# QDRANT_URL=http://qdrant:6333        # Override full URL (optional)
QDRANT_API_KEY=                        # Required for Qdrant Cloud

# ------------------------------------------------------------
# LLM Provider (OpenAI-compatible)
# Default: local Ollama. Set LLM_ENABLED=true to activate.
# ------------------------------------------------------------
LLM_ENABLED=false
LLM_BASE_URL=http://ollama:11434/v1
LLM_API_KEY=ollama
LLM_MODEL=phi3

# Cloud LLM example (uncomment to use OpenAI):
# LLM_ENABLED=true
# LLM_BASE_URL=https://api.openai.com/v1
# LLM_API_KEY=sk-openai-xxxx
# LLM_MODEL=gpt-4o-mini

# ------------------------------------------------------------
# NER Model (Hugging Face / ModernBERT)
# HF_TOKEN enables authenticated downloads and higher rate
# limits from the Hugging Face Hub. Strongly recommended to
# avoid cold-start failures on first boot.
# ------------------------------------------------------------
HF_TOKEN=                              # hf_xxxx (get from huggingface.co/settings/tokens)

# ------------------------------------------------------------
# Security
# ------------------------------------------------------------
# HMAC secret used to sign Proof Envelopes — CHANGE IN PRODUCTION
CONDENSATE_SECRET=changeme_in_production

# Admin dashboard credentials
ADMIN_USERNAME=admin
ADMIN_PASSWORD=admin

# ------------------------------------------------------------
# Memory Pipeline
# ------------------------------------------------------------
# Assertion review mode: "manual" (HITL queue) or "auto" (approve all)
REVIEW_MODE=manual

# Guardrail thresholds (0.0 = block nothing, 1.0 = block everything)
INSTRUCTION_BLOCK_THRESHOLD=0.5
SAFETY_BLOCK_THRESHOLD=0.7

# ------------------------------------------------------------
# Ingestion
# ------------------------------------------------------------
# Number of parallel workers for ingest_codebase.py
INGEST_WORKERS=8

# Directory where uploaded files are stored (relative to app root)
UPLOAD_DIR=uploads

# ------------------------------------------------------------
# SDK / Client (used by the Python SDK CLI and ingest scripts)
# ------------------------------------------------------------
CONDENSATE_URL=http://localhost:8000
CONDENSATE_API_KEY=sk-your-api-key-here

# ------------------------------------------------------------
# Data Migration (optional — bootstrap from LocalMem/old Qdrant)
# ------------------------------------------------------------
# LOCALMEMCP_PATH=/app/localmemcp_data
# OLD_QDRANT_HOST=host.docker.internal
# OLD_QDRANT_PORT=6333
